## Input ipyrad file prefix (without extension)
ipyrad_prefix: "test_data/Belenois_aurota_rmoutgroup"

## Analysis name (for output files and directories)
analysis_name: "Sample_analysis"

## Analysis selection - set to true/false to enable/disable
analyses:
  structure: falsse
  faststructure: true
  admixture: false
  pcaone: true
  pcaone_emu: false
  pcaone_mincov: false
  pixy: false


## Preprocessing parameters

# Many analyses require unlinkesd SNPs (one SNP per RAD fragment).
# The VCF file will is first filtered for bilallelic SNPs with MAC>1
# and then thinned to one SNP per RAD fragment using the parameters below.

# VCF thinning parameters (defaults shown):
vcf_thinning:
  min_coverage: 0          # minimum number of samples with data
  method: "max_coverage"   # selection method: random, max_coverage, or weighted
  ties: "random"           # handle ties in max_coverage: first or random
  ns_tag: "NS"             # INFO field tag for number of samples with data
  id_pattern: "loc(\\d+)_" # regex pattern to extract RAD fragment ID


## Population Structure Analysis

# Common K values to test for population structure (Structure, fastStructure and admixture):
k_values: [1, 2, 3]

## Structure parameters
structure:
  replicates: 2      # number of replicates for structure

## FastStructure parameters (defaults shown)
faststructure:
  tol: "10e-6"        # convergence criterion
  prior: "simple"     # prior choice: simple or logistic


## PCA parameters

# SVD method SVD method to be applied.
# Options are
# 0: the Implicitly Restarted Arnoldi Method (IRAM);
# 1: the Yu's single-pass Randomized SVD with power iterations;
# 2: the accurate window-based Randomized SVD method (PCAone), recommended for big data;
# 3: the full Singular Value Decomposition (default).
PCA:
  mincov_thresholds: [0.5, 0.6, 0.7, 0.8, 0.9]
  SVD_method: 3  


## Pixy parameters
pixy:
  stats: "pi fst dxy"  # statistics to compute, options: pi, fst, dxy
  window_size: 10000  # size of the sliding window in bp


## Analysis resources

# Define computational resources for different analysis steps.
# Memory is in MB and threads is the number of CPU threads.
# Runtime is in minutes.
resources:
  default: # default resources for simple steps like file conversion
    threads: 1
    mem_mb: 8000
    runtime: 10
  structure:
    threads: 1
    mem_mb: 8000
    runtime: 1440
  faststructure:
    threads: 4
    mem_mb: 8000
    runtime: 120
  admixture:
    threads: 4
    mem_mb: 16000
    runtime: 1440
  pcaone:
    threads: 1
    mem_mb: 8000
    runtime: 60
  pcaone_emu:
    threads: 12
    mem_mb: 8000
    runtime: 1440
  pixy:
    threads: 24
    mem_mb: 8000
    runtime: 600